{"version":3,"sources":["client/_common/modules/architecture/simple/input/file.component.ts"],"names":[],"mappings":";;;;;;;;;;;AACA,sCAAuE;AAEvE,2CAAsD;AAqBtD,IAAa,mBAAmB;IAkB9B,6BAAoB,iBAAoC;QAApC,sBAAiB,GAAjB,iBAAiB,CAAmB;QAbxC,UAAK,GAAW,QAAQ,CAAC;QAC3B,QAAG,GAAW,SAAS,CAAC;QAClB,cAAS,GAAW,EAAE,CAAC;QAC5B,SAAI,GAAW,SAAS,CAAC;QACnB,kBAAa,GAAW,EAAE,CAAC;QAC7B,aAAQ,GAAY,KAAK,CAAC;QAEnB,iBAAY,GAAG,IAAI,mBAAY,EAAE,CAAC;QAGpD,kBAAa,GAAgB,EAAE,CAAC;QAChC,aAAQ,GAAW,EAAE,CAAC;IAE6B,CAAC;IAE5D,+CAAiB,GAAjB,UAAmB,SAAc;QAE/B,EAAE,CAAC,CAAe,SAAS,CAAC,MAAM,CAAC,KAAM,CAAC,MAAM,IAAI,CAAC,CAAC;YAAC,MAAM,CAAC;QAC9D,IAAI,CAAC,aAAa,GAAiB,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC;QAC1D,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;QAC3C,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IACjD,CAAC;IAED,qCAAO,GAAP;QAEE,MAAM,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC;IAC1C,CAAC;IAED,oCAAM,GAAN,UAAQ,MAAgB;QAAhB,uBAAA,EAAA,WAAgB;QAEtB,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;YAAC,MAAM,CAAC;QAC3B,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC;YACnC,GAAG,EAAE,MAAM,CAAC,GAAG,IAAI,IAAI,CAAC,GAAG;YAC3B,KAAK,EAAE,IAAI,CAAC,aAAa;YACzB,SAAS,EAAE,MAAM,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS;YAC7C,MAAM,EAAE,MAAM,CAAC,MAAM,IAAI,EAAE;SAC5B,CAAC,CAAC;IACL,CAAC;IACH,0BAAC;AAAD,CA3CA,AA2CC,IAAA;AAtCiB;IAAf,YAAK,CAAC,OAAO,CAAC;;kDAA0B;AAC3B;IAAb,YAAK,CAAC,KAAK,CAAC;;gDAAyB;AAClB;IAAnB,YAAK,CAAC,WAAW,CAAC;;sDAAwB;AAC5B;IAAd,YAAK,CAAC,MAAM,CAAC;;iDAA0B;AACnB;IAApB,YAAK,CAAC,YAAY,CAAC;;0DAA4B;AAC7B;IAAlB,YAAK,CAAC,UAAU,CAAC;;qDAA2B;AAEnB;IAAzB,aAAM,CAAC,gBAAgB,CAAC;;yDAAmC;AAZjD,mBAAmB;IAnB/B,gBAAS,CAAC;QACT,QAAQ,EAAE,MAAM,CAAC,EAAE;QACnB,QAAQ,EAAE,aAAa;QACvB,QAAQ,EAAE,+eAcT;KACF,CAAC;qCAmBuC,yBAAiB;GAlB7C,mBAAmB,CA2C/B;AA3CY,kDAAmB","file":"file.component.js","sourcesContent":["\nimport { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { Observable } from 'rxjs/Observable';\nimport { FileUploadService } from '../../../../index';\n\n@Component({\n  moduleId: module.id,\n  selector: 'simple-file',\n  template: `\n    <label style=\"margin-right: 10px;\" [attr.class]=\"'btn btn-' + look + ' btn-file'\">\n      {{label}}\n      <input\n        (change)=\"onFileChangeInput($event)\"\n        [disabled]=\"disabled\"\n        type=\"file\"\n        style=\"display: none;\">\n    </label>\n    <div\n      [style.width.px]=\"widthFilename\"\n      style=\"vertical-align: middle; display: inline-block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\">\n      {{filename}}\n    </div>\n  `\n})\nexport class SimpleFileComponent\n{\n\n  //[FIXME]: to long files styles\n\n  @Input('label') label: string = 'Browse';\n  @Input('url') url: string = undefined;\n  @Input('fieldname') fieldname: string = '';\n  @Input('look') look: string = 'default';\n  @Input('width-name') widthFilename: number = 80;\n  @Input('disabled') disabled: boolean = false;\n\n  @Output('on-file-change') onFileChange = new EventEmitter();\n\n  //[XXX]: czy to nie powinno byc array?\n  private filesToUpload: Array<File> = [];\n  private filename: string = '';\n\n  constructor(private fileUploadService: FileUploadService) {}\n\n  onFileChangeInput (fileInput: any)\n  {\n    if ((<Array<File>>fileInput.target.files).length == 0) return;\n    this.filesToUpload = <Array<File>> fileInput.target.files;\n    this.filename = this.filesToUpload[0].name;\n    this.onFileChange.emit(fileInput.target.files);\n  }\n\n  isReady ()\n  {\n    return (this.filesToUpload.length == 0);\n  }\n\n  upload (params: any = {}): Observable<any>\n  {\n    if (this.isReady()) return;\n    return this.fileUploadService.upload({\n      url: params.url || this.url,\n      files: this.filesToUpload,\n      fieldname: params.fieldname || this.fieldname,\n      params: params.params || {}\n    });\n  }\n}\n"]}